<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель курсанта | LDUBGD System</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root {
            --primary: #003566;
            --accent: #ffc300;
            --bg: #f0f2f5;
            --white: #ffffff;
            --sidebar-w: 280px;
            --danger: #d00000;
            --success: #28a745;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); font-family: 'Inter', sans-serif; display: flex; color: #333; }

        /* SIDEBAR */
        aside {
            width: var(--sidebar-w); height: 100vh; background: var(--white);
            position: fixed; border-right: 1px solid #dee2e6; z-index: 100;
            display: flex; flex-direction: column;
        }

        .logo-area { padding: 25px; font-size: 1.5rem; font-weight: 800; color: var(--primary); border-bottom: 1px solid #eee; }
        .logo-area span { color: var(--accent); }

        .sidebar-content { flex: 1; overflow-y: auto; padding-bottom: 20px; }
        .menu-label { padding: 20px 25px 8px; font-size: 0.7rem; text-transform: uppercase; color: #6c757d; font-weight: 700; letter-spacing: 0.5px; }

        .menu-item {
            padding: 12px 25px; display: flex; align-items: center; gap: 12px;
            cursor: pointer; color: #444; text-decoration: none; transition: 0.2s;
            border-left: 4px solid transparent;
        }

        .menu-item:hover { background: #f8f9fa; color: var(--primary); }

        .menu-item.active {
            background: #e7f0fd;
            color: var(--primary);
            border-left-color: var(--primary);
            font-weight: 600;
        }

        /* QUICK ACTIONS IN MENU */
        .btn-quick {
            margin: 5px 20px; padding: 10px 15px; border-radius: 8px;
            background: var(--primary); color: white !important; font-weight: 600;
            font-size: 0.9rem; justify-content: center; border: none;
        }
        .btn-quick:hover { background: #002850; opacity: 0.9; }
        .btn-quick-sec { background: #e9ecef; color: var(--dark) !important; border: 1px solid #ddd; }

        /* MAIN CONTENT */
        main { flex: 1; margin-left: var(--sidebar-w); padding: 40px; padding-top: 100px; min-height: 100vh; }

        header {
            position: fixed; top: 0; left: var(--sidebar-w); right: 0; height: 70px;
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 40px; border-bottom: 1px solid #eee; z-index: 90;
        }

        .page-section { display: none; animation: fadeIn 0.3s ease; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* CARDS & TABLES */
        .card { background: white; padding: 25px; border-radius: 12px; border: 1px solid #dee2e6; margin-bottom: 25px; }
        .grid-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px; }
        .stat-val { font-size: 2rem; font-weight: 700; margin-top: 5px; }

        .excel-container { background: white; border-radius: 12px; border: 1px solid #dee2e6; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: center; font-size: 0.85rem; }
        th { background: #f8f9fa; color: #666; font-weight: 600; }
        td:first-child { position: sticky; left: 0; background: #f8f9fa; font-weight: 600; min-width: 160px; text-align: left; border-right: 2px solid #eee; }

        .duty-p { background: #e7f3ff; color: #007bff; font-weight: 800; }
        .duty-np { background: #fff0f0; color: #dc3545; font-weight: 800; }

        /* MODAL */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); }
        .modal-content { background: white; margin: 10% auto; padding: 30px; border-radius: 15px; width: 450px; position: relative; }
        .close { position: absolute; right: 20px; top: 15px; cursor: pointer; font-size: 1.5rem; }
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0 20px; border: 1px solid #ddd; border-radius: 8px; }
    </style>
</head>
<body>

<aside>
    <div class="logo-area">LDUBGD <span>SYSTEM</span></div>

    <div class="sidebar-content">
        <div class="menu-label">Швидкі дії</div>
        <button class="menu-item btn-quick" onclick="openModal('рапорт')">
            <i class="bi bi-file-earmark-plus"></i> Подати рапорт
        </button>
        <button class="menu-item btn-quick btn-quick-sec" onclick="openModal('заміну')">
            <i class="bi bi-arrow-left-right"></i> Запит на зміну
        </button>

        <div class="menu-label">Основне</div>
        <div class="menu-item active" id="nav-dashboard" onclick="switchSection('dashboard')">
            <i class="bi bi-house-door"></i> Головна
        </div>
        <div class="menu-item" id="nav-schedule" onclick="switchSection('schedule')">
            <i class="bi bi-calendar3"></i> Графік нарядів
        </div>
        <div class="menu-item" id="nav-history" onclick="switchSection('history')">
            <i class="bi bi-clock-history"></i> Мої запити
        </div>

        <div class="menu-label">Університет</div>
        <a href="https://rozklad.ldubgd.edu.ua/" target="_blank" class="menu-item"><i class="bi bi-calendar-event"></i> Розклад занять</a>
        <a href="https://virt.ldubgd.edu.ua/" target="_blank" class="menu-item"><i class="bi bi-mortarboard"></i> Віртуальний ун-т</a>
        <a href="https://ldubgd.edu.ua/" target="_blank" class="menu-item"><i class="bi bi-globe"></i> Сайт ЛДУБЖД</a>

        <div class="menu-label">Кабінет</div>
        <div class="menu-item" id="nav-settings" onclick="switchSection('settings')">
            <i class="bi bi-gear"></i> Налаштування
        </div>
    </div>
</aside>

<header>
    <h3 id="panel-indicator" style="color: var(--primary); font-weight: 700;">
        <i class="bi bi-house-door"></i> Головна панель
    </h3>
    <div style="display: flex; align-items: center; gap: 25px;">
        <div style="position: relative; cursor: pointer;">
            <i class="bi bi-bell" style="font-size: 1.3rem;"></i>
            <span style="position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; border-radius: 50%; padding: 2px 5px; font-size: 0.65rem;">3</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
            <div style="text-align: right; line-height: 1.2;">
                <div style="font-weight: 700; font-size: 0.9rem;">О. Мельник</div>
                <div style="font-size: 0.75rem; color: #666;">Курсант 3-го курсу</div>
            </div>
            <i class="bi bi-person-circle" style="font-size: 2rem; color: var(--primary);"></i>
        </div>
    </div>
</header>

<main>
    <section id="dashboard" class="page-section active">
        <div class="grid-stats">
            <div class="card">
                <h4 style="color: #666; font-size: 0.8rem; text-transform: uppercase;">Планові наряди</h4>
                <div class="stat-val">12</div>
                <small style="color: var(--success);">За поточний семестр</small>
            </div>
            <div class="card">
                <h4 style="color: #666; font-size: 0.8rem; text-transform: uppercase;">Позапланові (Зальоти)</h4>
                <div class="stat-val" style="color: var(--danger);">3</div>
                <small>Навчання / Дисципліна</small>
            </div>
            <div class="card">
                <h4 style="color: #666; font-size: 0.8rem; text-transform: uppercase;">Годин у наряді</h4>
                <div class="stat-val">360</div>
                <small>Загальне навантаження</small>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 20px;">Статус останніх заявок</h3>
            <div style="border-bottom: 1px solid #eee; padding: 12px 0; display: flex; justify-content: space-between;">
                <span>Звільнення (10.01.2026)</span>
                <span style="color: var(--success); font-weight: 700;">● Схвалено</span>
            </div>
            <div style="padding: 12px 0; display: flex; justify-content: space-between;">
                <span>Відпустка (Зимова)</span>
                <span style="color: #f39c12; font-weight: 700;">● На розгляді</span>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 15px;">Останні зауваження</h3>
            <div style="color: #555; line-height: 1.8;">
                <p><strong>05.01</strong> — Незадовільна оцінка з "Тактики" <span style="color: var(--danger);">+1 наряд</span></p>
                <p><strong>28.12</strong> — Запізнення на ранкове шикування <span style="color: var(--danger);">+1 наряд</span></p>
            </div>
        </div>
    </section>

    <section id="schedule" class="page-section">
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
            <h2>Загальний графік на січень</h2>
            <div style="display: flex; gap: 15px;">
                <span style="font-size: 0.8rem;"><span style="color: #007bff;">●</span> Плановий</span>
                <span style="font-size: 0.8rem;"><span style="color: #dc3545;">●</span> Штрафний</span>
            </div>
        </div>
        <div class="excel-container">
            <table id="dutyTable">
                <thead><tr id="tableHead"></tr></thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </section>
</main>

<div id="modalAction" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2 id="modalTitle">Подати рапорт</h2>
        <hr style="margin: 15px 0;">
        <label>Дата події</label>
        <input type="date">
        <label>Причина / Обґрунтування</label>
        <textarea rows="4" placeholder="Вкажіть деталі вашого звернення..."></textarea>
        <button class="btn-quick" style="width: 100%; margin: 0;" onclick="submitAction()">Відправити командиру</button>
    </div>
</div>

<script>
    function switchSection(id) {
        // Ховаємо секції
        document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');

        // Оновлюємо меню
        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
        const activeNav = document.getElementById('nav-' + id);
        if(activeNav) activeNav.classList.add('active');

        // Оновлюємо заголовок у хедері
        const titles = {
            'dashboard': '<i class="bi bi-house-door"></i> Головна панель',
            'schedule': '<i class="bi bi-calendar3"></i> Графік нарядів',
            'history': '<i class="bi bi-clock-history"></i> Історія запитів',
            'settings': '<i class="bi bi-gear"></i> Налаштування'
        };
        document.getElementById('panel-indicator').innerHTML = titles[id];

        if(id === 'schedule') renderTable();
    }

    function openModal(text) {
        document.getElementById('modalTitle').innerText = 'Подати запит на ' + text;
        document.getElementById('modalAction').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('modalAction').style.display = 'none';
    }

    function submitAction() {
        alert("Запит успішно надіслано на розгляд!");
        closeModal();
    }

    function renderTable() {
        const head = document.getElementById('tableHead');
        const body = document.getElementById('tableBody');

        let hHtml = '<th>Прізвище</th>';
        for(let i=1; i<=31; i++) hHtml += `<th>${i}</th>`;
        head.innerHTML = hHtml;

        const names = ["Мельник О.В.", "Іванов І.І.", "Петров А.С.", "Сидоров В.Я.", "Бондар К.О."];
        let bHtml = '';
        names.forEach(name => {
            bHtml += `<tr><td>${name}</td>`;
            for(let i=1; i<=31; i++) {
                let cls = "";
                let val = "";
                if(name === "Мельник О.В." && i === 5) { cls = "duty-p"; val = "П"; }
                if(name === "Мельник О.В." && i === 12) { cls = "duty-np"; val = "З"; }
                bHtml += `<td class="${cls}">${val}</td>`;
            }
            bHtml += '</tr>';
        });
        body.innerHTML = bHtml;
    }

    window.onclick = function(event) {
        if (event.target == document.getElementById('modalAction')) closeModal();
    }
</script>

</body>
</html>